"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[7019],{8824:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=n(4848),t=n(8453);const r={},o="Custom Prompt Avatars",l={id:"community-contributions/cc-sentences/avatar_prompt_responses",title:"Custom Prompt Avatars",description:"This feature adds the ability to select an avatar as a custom wake-word prompt, allowing it to respond in any language, voice, or TTS service with personalized random TTS responses.",source:"@site/docs/community-contributions/cc-sentences/avatar_prompt_responses.md",sourceDirName:"community-contributions/cc-sentences",slug:"/community-contributions/cc-sentences/avatar_prompt_responses",permalink:"/View-Assist/docs/community-contributions/cc-sentences/avatar_prompt_responses",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Ask Wolfram",permalink:"/View-Assist/docs/community-contributions/cc-sentences/ask-wolfram"},next:{title:"Calculations",permalink:"/View-Assist/docs/community-contributions/cc-sentences/calculations"}},a={},c=[{value:"\ud83e\udde0 How it works",id:"-how-it-works",level:2},{value:"\u2699\ufe0f Pre-requisites",id:"\ufe0f-pre-requisites",level:2},{value:"\ud83d\udce6 Installation",id:"-installation",level:2},{value:"Step 1 \u2014 Copy overlay files",id:"step-1--copy-overlay-files",level:3},{value:"Step 2 \u2014 Configure your avatar in View Assist",id:"step-2--configure-your-avatar-in-view-assist",level:3},{value:"Step 3 \u2014 Install and set up the Blueprint",id:"step-3--install-and-set-up-the-blueprint",level:3},{value:"Step 4 \u2014 Set up your TTS URL Template",id:"step-4--set-up-your-tts-url-template",level:3},{value:"Step 5 \u2014 Microphone synchronization",id:"step-5--microphone-synchronization",level:3},{value:"\u2705 Summary",id:"-summary",level:2}];function h(e){const s={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"custom-prompt-avatars",children:"Custom Prompt Avatars"}),"\n",(0,i.jsxs)(s.p,{children:["This feature adds the ability to ",(0,i.jsx)(s.strong,{children:"select an avatar as a custom wake-word prompt"}),", allowing it to respond in ",(0,i.jsx)(s.em,{children:"any language, voice, or TTS service"})," with ",(0,i.jsx)(s.strong,{children:"personalized random TTS responses"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["Each avatar is represented through animated GIFs that appear on the screen when the wake word is detected.",(0,i.jsx)(s.br,{}),"\n","The included ",(0,i.jsx)(s.strong,{children:"blueprint"})," handles synchronization between the satellite microphone, the avatar animations, and the TTS greeting message."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-how-it-works",children:"\ud83e\udde0 How it works"}),"\n",(0,i.jsx)(s.p,{children:"When the wake word is detected:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["The blueprint mutes the microphone for about ",(0,i.jsx)(s.strong,{children:"1.5\u20132 seconds"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["It plays a ",(0,i.jsx)(s.strong,{children:"custom random TTS greeting message"}),", such as:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u201cHow can I help you?\u201d"}),"\n",(0,i.jsx)(s.li,{children:"\u201cYes, I\u2019m listening.\u201d"}),"\n",(0,i.jsx)(s.li,{children:"\u201cHow can I assist you?\u201d"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["The avatar\u2019s ",(0,i.jsx)(s.strong,{children:"speech GIF"})," is shown during playback, then transitions to the ",(0,i.jsx)(s.strong,{children:"listening GIF"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Once playback is finished, the blueprint ",(0,i.jsx)(s.strong,{children:"unmutes the microphone"}),", ready to capture your command."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This allows a natural and personalized interaction flow between the user and the assistant."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"\ufe0f-pre-requisites",children:"\u2699\ufe0f Pre-requisites"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Home Assistant 2025.11.1 or newer"})}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.a,{href:"https://my.home-assistant.io/redirect/voice_assistants/",children:"configured voice assistant in Home Assistant"})," with STT and TTS in your preferred language"]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.a,{href:"https://github.com/dinki/view_assist_integration",children:"View Assist Integration"})," installed, with all dependencies"]}),"\n",(0,i.jsxs)(s.li,{children:["An audio streaming integration with microphone mute/unmute capability",(0,i.jsx)(s.br,{}),"\n","For Android tablets, it\u2019s recommended to use the ",(0,i.jsx)(s.a,{href:"https://github.com/msp1974/ViewAssist_Companion_App",children:"View Assist Companion App"})]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-installation",children:"\ud83d\udce6 Installation"}),"\n",(0,i.jsx)(s.h3,{id:"step-1--copy-overlay-files",children:"Step 1 \u2014 Copy overlay files"}),"\n",(0,i.jsxs)(s.p,{children:["Copy the ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"custom_overlays"})})," folder and the desired files into your Home Assistant configuration:"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"/config/view_assist/"})}),"\n",(0,i.jsxs)(s.p,{children:["Be careful ",(0,i.jsx)(s.strong,{children:"not to confuse this with"})," ",(0,i.jsx)(s.code,{children:"/config/custom_components/view_assist/"}),".",(0,i.jsx)(s.br,{}),"\n","Inside ",(0,i.jsx)(s.code,{children:"custom_overlays"}),", you\u2019ll find:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"overlay.css"})," \u2014 controls animation timing and display"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"overlay.html"})," \u2014 defines which avatars are shown"]}),"\n",(0,i.jsxs)(s.li,{children:["Avatar GIFs (each avatar has two GIFs:",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.code,{children:"<name>_speech.gif"})," and ",(0,i.jsx)(s.code,{children:"<name>_listen.gif"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If you don\u2019t want to copy the full folder (to save space), you can manually create:\n",(0,i.jsx)(s.code,{children:"/config/view_assist/custom_overlays/"})," directory"]}),"\n",(0,i.jsx)(s.p,{children:"Then:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Copy ",(0,i.jsx)(s.code,{children:"overlay.css"})]}),"\n",(0,i.jsxs)(s.li,{children:["Copy ",(0,i.jsx)(s.code,{children:"overlay.html"})," and ",(0,i.jsx)(s.strong,{children:"uncomment"})," only the sections for the avatars you wish to use"]}),"\n",(0,i.jsx)(s.li,{children:"Copy the corresponding GIFs for those avatars"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Finally, ",(0,i.jsx)(s.strong,{children:"restart Home Assistant"})," or reload YAML files."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"step-2--configure-your-avatar-in-view-assist",children:"Step 2 \u2014 Configure your avatar in View Assist"}),"\n",(0,i.jsxs)(s.p,{children:["Open ",(0,i.jsx)(s.strong,{children:"Settings \u2192 Dashboard Options \u2192 Display Settings \u2192 Assist Prompt"}),",",(0,i.jsx)(s.br,{}),"\n","and select the avatar you\u2019ve activated."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"step-3--install-and-set-up-the-blueprint",children:"Step 3 \u2014 Install and set up the Blueprint"}),"\n",(0,i.jsxs)(s.p,{children:["Import and install the blueprint:",(0,i.jsx)(s.br,{}),"\n","\ud83d\udc49 ",(0,i.jsx)(s.a,{href:"https://github.com/dinki/View-Assist/tree/dev/View_Assist_custom_sentences/community_contributions/Avatar_Prompt_Responses",children:"Custom Prompt Responses"})]}),"\n",(0,i.jsx)(s.p,{children:"Then, configure the fields as follows:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Assist Satellites"})," \u2192 Select ",(0,i.jsx)(s.strong,{children:"all satellites"})," you want to use the custom responses with."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Custom Responses"})," \u2192 Add short random responses, e.g.:"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"How can I help you?"}),"\n",(0,i.jsx)(s.p,{children:"Yes, I'm listening."}),"\n",(0,i.jsx)(s.p,{children:"How can I assist you?"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.em,{children:"Keep them short (1.5\u20132s playback) for synchronization with the avatar animation."})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"step-4--set-up-your-tts-url-template",children:"Step 4 \u2014 Set up your TTS URL Template"}),"\n",(0,i.jsxs)(s.p,{children:["You can use ",(0,i.jsx)(s.strong,{children:"any TTS service"})," for the ",(0,i.jsx)(s.em,{children:"TTS URL Template"}),".",(0,i.jsx)(s.br,{}),"\n","Here\u2019s a simple trick to find the correct format for your setup:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Go to ",(0,i.jsx)(s.strong,{children:"Developer Tools \u2192 Actions"})]}),"\n",(0,i.jsxs)(s.li,{children:["Choose the service ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"media_player.play_media"})})]}),"\n",(0,i.jsxs)(s.li,{children:["Select a speaker under ",(0,i.jsx)(s.strong,{children:"Target"})]}),"\n",(0,i.jsxs)(s.li,{children:["Under ",(0,i.jsx)(s.strong,{children:"Media"}),", click ",(0,i.jsx)(s.strong,{children:"Pick media"})]}),"\n",(0,i.jsxs)(s.li,{children:["Choose a ",(0,i.jsx)(s.strong,{children:"TTS service"}),", ",(0,i.jsx)(s.strong,{children:"language"}),", and ",(0,i.jsx)(s.strong,{children:"voice"}),", then type a short test message"]}),"\n",(0,i.jsxs)(s.li,{children:["Switch to ",(0,i.jsx)(s.strong,{children:"YAML mode"})," \u2014 you\u2019ll see the field ",(0,i.jsx)(s.code,{children:"media_content_id"})," \u2014 that\u2019s your ",(0,i.jsx)(s.strong,{children:"TTS URL"})]}),"\n",(0,i.jsxs)(s.li,{children:["Copy that URL, and replace the message text inside it with:\n",(0,i.jsx)(s.code,{children:"{{ custom_responses | random }}"})]}),"\n",(0,i.jsxs)(s.li,{children:["Paste the full modified URL into the blueprint\u2019s ",(0,i.jsx)(s.strong,{children:"TTS URL Template"})," field"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["This method works with ",(0,i.jsx)(s.strong,{children:"any language"}),", ",(0,i.jsx)(s.strong,{children:"any voice"}),", and ",(0,i.jsx)(s.strong,{children:"any number of custom messages"}),", making it extremely flexible."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"step-5--microphone-synchronization",children:"Step 5 \u2014 Microphone synchronization"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Microphone Active State"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Set to ",(0,i.jsx)(s.strong,{children:"on"})," if your microphone entity is active when the switch is ON."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["However, if your switch controls ",(0,i.jsx)(s.em,{children:"mute"}),", then ON may actually mean \u201cmuted.\u201d Adjust accordingly."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Microphone Reactivation Delay (seconds)"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Adjust this value so the microphone reactivates ",(0,i.jsx)(s.strong,{children:"just after"})," the greeting message finishes."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"If the delay is too short, part of the greeting may be captured and confuse the STT."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"If too long, the beginning of the user\u2019s command might be missed."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-summary",children:"\u2705 Summary"}),"\n",(0,i.jsx)(s.p,{children:"Once set up, your system will:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Detect the wake word"}),"\n",(0,i.jsx)(s.li,{children:"Show the chosen animated avatar"}),"\n",(0,i.jsx)(s.li,{children:"Play a random personalized TTS greeting"}),"\n",(0,i.jsxs)(s.li,{children:["Reactivate listening smoothly",(0,i.jsx)(s.br,{}),"\n","\u2026all synchronized for a natural, multilingual experience."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Enjoy creating your own avatars and personalities for your assistants!"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.em,{children:["Created by ",(0,i.jsx)(s.a,{href:"https://github.com/relust",children:"@relust"})," for the ",(0,i.jsx)(s.a,{href:"https://github.com/dinki/view_assist_integration",children:"View Assist Integration"}),"."]})})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);